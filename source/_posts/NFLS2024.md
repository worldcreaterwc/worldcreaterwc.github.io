---
title: NFLS 集训学习笔记
date: 2024-03-14 21:16:30
categories: 学习笔记
tags:
---
# 311A TopCoder SRM555 XorBoard

## 简要题意

$n\times m$ 网格，至多做 $R$ 次行取反，至多做 $C$ 次列取反。求本质不同操作方案使得有 $S$ 个 $1$，本质不同指存在一行或一列操作次数不同。

网格大小 $1666$。

## Sol
枚举最终被操作奇数次的行列，判断数量对不对，先乘个组合数，然后行上列上要算 $n$ 个无标号球放到 $m$ 个有标号盒子里的方案数，盒子可以为空，这个可以简单插板法计算。

（说实话当时没想到插板，写了个奇怪 dp，数数数少导致的）。

**启示：** 枚举操作是很笨且有效的手段，无标号计数可以考虑插板。
# 311B Topcoder SRM550 ConversionMachine

## 简要题意
给一个长度为 $n$ 的字符串 $s_1,s_2$，字符集为 $3$。现允许 $s1$ 做 $1\to 2,2\to 3,3\to 1$ 的单向变换，代价为 $c_1,c_2,c_3$，求有多少操作序列代价和不超过 $w$ 使得 $s_1$ 变为 $s_2$。

## Sol
考虑先把每个位置变换成与 $s_2$ 相同，然后就可以算出总操作次数，问题就变成了有若干个序列，每个序列对三取余长度限定，求这些序列归并成一个程度为 $m$ 的方案数。

这个问题可以直接上单位根反演的 EGF，然后暴力枚举展开式可以做到 $\mathcal{O}(n^6\log n)$，也可以当成多元生成函数求偏导优化 EGF 快速幂做到很低的复杂度。

不过显然也可以直接矩乘，因为发现操作到一定次数后所有序列长度都合法这个是充要的，那么直接设 $f_{i,j}$ 表示有 $i$ 个序列需要动零次，$j$ 个序列需要动一次，剩下动两次，直接转移，复杂度 $\mathcal{O}(n^6\log n)$。