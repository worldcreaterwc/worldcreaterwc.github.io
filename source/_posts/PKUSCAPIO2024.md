---
title: PKUSC2024 & APIO2024 游记
date: 2024-05-13 20:16:33
tags:
categories: 游记
---
# PKUSC2024 \& APIO2024 游记
![-2024-05-13-20-13-51.png](https://z4a.net/images/2024/05/13/-2024-05-13-20-13-51.png)

以 PKUSC Day1 作为 Day1。

## Day -?

加训练功。

好像不会打模拟赛了，感觉集训完反而不会做题了，模拟赛有不少直接做起来很顺的题反而直接思路发散，没有省选前的注意力。不知道是自己底力不足暴露了还是 Topcoder 做多了正常题不会做了。

## Day 1

包车去 XJ，车上在睡觉。

SXYZ 到 XJWY 开车居然不到一个小时，太快了！

上午幽默讲座，XJWY 校长把大家都逗乐了（字面意思）。

试机，题怎么是 PKUWC D2T2，那我光速跑路，打板子启动，先打了个 NTT，结果合并的时候不会打了，再打了个双半群线段树，结果没打完就被同学拉走了（。

中午盒饭貌似有点不尽人意，希望后面 APIO 不要也是这样（无所谓，酱油仙人会出击）。

休息室尝试给 Gold 来些外服引诱（。

尝试奶自己不会过题（伏笔）。

下午，终于启动！

先看题，后面两题居然没有数据结构。

T1，想了一些二分哈希，然后发现我要对中点有换行的那一侧的东西求某个哈希值是否存在，然后搞不出来（事实上也搞不出来啊，怎么可能对 $\mathcal{O}(n^2)$ 的信息快速维护查询啊）。

然后发现换行前后的串一定是一边是 $\verb!AB!$，一边是 $\verb!C!$，其中 $\verb!C!$ 是 $\verb!A!$ 的反串，$\verb!B!$ 是一个回文串。

然后就一直在想对末尾位置维护 $\verb!B!$ 的信息，结果搞不出来，自闭了，跑路。

有点难受，后面直接开始拼暴力了。

看 B，尝试拼上前三个包，这样就有三位数了！（幽默

正方形是好写的，小的包我直接把所有东西都扣出来然后乱做，然后三角形不会了。

先看 C，想了一个很大的 DP，发现可以记录差值把复杂度降下来，结果一直写不对，愤怒 $11$ 分跑路。

然后搞搞 B 的三角形，发现我至少要算一个执教三角形内某个点右上角的整点数量，本来想皮克定理结果发现很不好算，结果发现这个值域不是二维前缀和吗？？？直接开写。

假了一次，不知道怎么办，然后考虑分讨了一下枚举的边与三角形边的斜率关系，很快就过了。

剩下的时间在 emo 和想办法搞 T1 和 T3 的循环中，然后没搞出来，结束了。

事实上自己打比赛容易做不出来的时候反复横跳，这样如果都搞出来的分会很多，但是没有进展的话就很浪费时间。

$50+50+11=111$，全场最抽象得分。

赛后发现都过了 T1，问了一下 pai T1 怎么做，发现这里的 $\verb!B!$ 贪心考虑一定是某个中点的最长回文半径的串。

？？？？？？？

这下不会贪心了，唐完了。

更唐的是，如果枚举中点考虑回文半径暴力一点确实是 $\mathcal{O}(n^2)$ 的，但是这个东西写好一点它能过！！！！！

还好不是 NOI D2T2，据说去年出串串题也是这个样子。

然后 T2 发现 $\mathcal{O}(V^3)$ 也是简单的。

T3，最暴力的暴力可以分析得到一个能过的结果，但是我没写，/oh。

但是知道了维护钦定选根 $i$ 的最大独立集的差值和钦定不选根的最大独立集的差值不超过 $a_i$，感觉还是很妙的（好像是 SDOI2022 D2T1，但是我没做过）。

回机房的时候听人说了一下发现 T2 $\mathcal{O}(V^2\mathrm{poly}(n))$ 也是简单的！这下这场发挥完全零蛋了。

属于是这场打的比 NOIP 和 CSP 还要唐，实力停留在省选以前了。

看看 Day2 怎么说。

---

题和目前自己会的分（可能存在记忆偏差）：

### T1

给一个 $2\times n$ 的字符矩阵，每个元素为小写字母。

你可以从矩阵内任意个点出发，每次往右或往下走，然后在任意一个点停下来，把所有经过的位置按顺序写成一个字符串，如果这个字符串是回文的，那么称这次行走的路径为一条回文路径。

求最长回文路径。

总范围：$1\leq n\leq 100000$。

+ Sub1(20): $1\leq n\leq 2000$。  
+ Sub2(30): 只使用向右走可以得到最优解。
+ Sub3(30): 无特殊限制。

解法：

考虑换行前后的字符串，假设上面的部分比下面长，那么我们可以把上面的部分写成 $\verb!AB!$，下面的部分写成 $\verb!C!$，则有 $\verb!A!$ 是 $\verb!C!$ 互为反串，$\verb!B!$ 为回文串。

考虑所有回文中心相同的 $\verb!B!$，有结论：相同回文中心的 $\verb!B!$，只需要考虑最长的 $\verb!B!$。

考虑 $\verb!B!$ 越长，对下面的部分限制就越小可以分析得到这个结果。

然后就可以二分哈希了。

### T2

给一个顶点数为 $n$ 的凸包，求内部有多少整点正方形。

令 $x_i,y_i$ 表示凸包顶点 $i$ 的坐标。

总范围：$1\leq n\leq 8,0\leq x_i,y_i\leq 2000$。

+ Sub1(10): 凸包一定是长方形，边与坐标轴平行。
+ Sub2(25): 凸包一定是一个直角三角形，左下角为直角定点，直角边与坐标轴平行。
+ Sub3(15): $x_i,y_i\leq 15$。
+ Sub4(15): $x_i,y_i\leq 300$。
+ Sub5(15): $x_i,y_i\leq 800$。
+ Sub6(20): 无特殊限制。

解法：

考虑特殊图形怎么做。

对于长方形，我们可以枚举正方形的形状（枚举左下角的边），然后这个正方形的外边框在这个长方形内就说明了这个正方形在这个长方形内，可以直接算。

对于三角形，还是枚举形状，考虑分析右上角的边与三角形斜边的斜率关系，这样可以把整个正方形在三角形内的的条件放到右上角边的某个端点在三角形内。

现在只要求三角形的某个点右上角有多少整点，最暴力的方法是二维前缀和。

对于一般做法，发现暴力要枚举某个点的位置很难优化，所以我们还是枚举形状！这样对于某个点的限制就是要求其在凸包内，由于形状确定，所以四个点的限制全部可以平移到一个点上，那么限制就是四个凸包的交内的整点数，半平面交求出凸包后可以使用皮克定理计算。

### T3

给一棵树，每个点的可以分配 $[1,m]$ 内的权值。

求所有分配情况中树的最大权独立集之和。

总限制：$1\leq n\leq 2000,1\leq m\leq 10^8$。

+ Sub1(11): $n,m\leq 8$。
+ Sub2(24): $n,m\leq 20$。
+ Sub3(13): $n,m\leq 500$。
+ Sub4(?): $n\leq 500$。
+ Sub5(?): 无特殊限制。

（可能少了一个 Sub）

考虑暴力，设 $f_{u,x,y}$ 表示 $u$ 子树内钦定选 $u$ 的最大独立集为 $x$，钦定不选 $u$ 时的最大独立集为 $y$，暴力转移貌似可以分析到 $\mathcal{O}(n^2m^4)$。

可以只记录 $x-y$ 的值，这样可能转移会复杂，注意到 $|x-y|\leq m$，那么转移复杂度 $\mathcal{O}(nm^2)$。

观察到答案是关于 $m$ 的多项式，插值可以做到 $\mathcal{O}(n^4)$。

剩下不会了。



